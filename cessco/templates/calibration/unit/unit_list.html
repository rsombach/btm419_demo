{% extends "base.html" %}
{% load i18n %}
{% load render_table from django_tables2 %}
{% load django_bootstrap_breadcrumbs %}

{% block js_scripts %}

    <script type="text/javascript">
        $(document).ready(function() 
            { 
                $("#unitTable").tablesorter(); 
            } 
        );
    </script>

{% endblock %}

{% block title %}{{ title }} | Home {% endblock %}

{% block branding %}
<h1 id="site-name">Cessco Quality Control</h1>
{% endblock %}

{% block nav-global %}{% endblock %}

{% block content %}

	{% if user.is_authenticated %}
	
		{% if perms.calibration.select_calibration %}

			{% block breadcrumbs %}
		
				{{ block.super }}
				{% breadcrumb "Unit List" "unit_list" %}
			
			{% endblock %}
		
			{% render_breadcrumbs %}
		
		    <h2>Calibration Units</h2>

		    {% if unit_list %}
				<table id="unitTable" width="90%" border="0" class="table table-striped table-bordered table-condensed tablesorter">
					<thead>
					<tr>
						<td><strong>Serial Number</strong></td>
		            	<td><strong>Type</strong></td>
		            	<td><strong>Make</strong></td>
		            	<td><strong>Model</strong></td>
		            	<td><strong>Start Date</strong></td>
		            	<td><strong>Active</strong></td>
					</tr>
					</thead>
					<tbody>
					{% for unit in unit_list %}
				        <tr>
							<td><a href="/calibration/unit/{{ unit.id }}/">{{ unit.serial_number }}</a></td>
							<td>{{ unit.unit_type__unit_type_code }}</td>
							<td>{{ unit.unit_make__unit_make_code }}</td>
							<td>{{ unit.model }}</td>
							<td>{{ unit.start_date|date:"Y-m-d" }}</td>
							<td>
								{% if unit.active %}
								Yes
								{% else %}
								No
								{% endif %}							
							</td>
						</tr>
				    {% endfor %}
				    </tbody>
			    </table>

			    <table width="90%" border="5" class="table table-striped table-bordered table-condensed">
					<tr>
		            	<td><div class="text-right">{{ unit_list_count }} units</div></td>
					</tr>
				</table>

			{% else %}

	    		<table width="90%" border=0 class="table table-striped table-bordered table-condensed">
	        		<tr><td>Sorry, there are no calibration units in the database.</td></tr>
	        	</table>

	        {% endif %}

		{% else %}
		
			You do not have permission to access this page. Please contact your System Administrator.
		
		{% endif %}
		
	{% else %}

		Access denied, please <a href="/login/">login</a>.

	{% endif %}

{% endblock %}







